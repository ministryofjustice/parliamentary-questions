<h2>Question Details</h2>

<%= render partial: "shared/flash_messages", flash: flash %>

<%= form_for @pq, :url => { :action => "update", :id => @pq[:uin] } do |f| %>


<div class="questions-detail-outer" style="overflow:auto;">
  <div>
    <span class="uin"><%= @pq.uin %></span>
    <%= render partial: 'shared/deadline_time', locals: {internal_deadline: @pq.internal_deadline} %>
  </div>
  <div style="Width:400px; float:left;">
    <div>
        <div>
        Tabling Member: <%= @pq.member_name %>
        </div>
        <div>
        Constituency: <%= @pq.member_constituency %>
        </div>
        <div>
        House: <%= @pq.house_name %>
        </div>
        <div>
          Replying minister: <%= @pq.minister.name unless @pq.minister_id.nil? %></span>
        </div>
        <% if !@pq.policy_minister_id.nil? %>
        <div>
          <span>Policy minister: <%= @pq.policy_minister.name %></span>
        </div>
        <% end %>
        <div id="question_allocation_<%= @pq.id %>">
          <%= render partial: 'shared/question_assigned', locals: {question: @pq} %>
        </div>
    </div>
  </div>
  <div style="float:right;">

    <div class="deadline_input">
      <label for="internal_deadline">Deadline</label>
      <div class='input-group date datetimepicker' id='datetimepicker1' data-date-format="DD/MM/YYYY HH:mm">
        <input class="form-control" id="pq_internal_deadline" name="pq[internal_deadline]" type="text" value="<%= @pq.internal_deadline.strftime('%d/%m/%Y %H:%M') unless @pq.internal_deadline.nil? %>">
        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
        </span>
      </div>
    </div>

  	<div>
    	<span class="date">Date For Answer: <%= @pq.date_for_answer.strftime('%d/%m/%Y') unless @pq.date_for_answer.nil? %></span>
  	</div>
  	<div>
    	<span class="date">Date Tabled: <%= @pq.tabled_date.strftime('%d/%m/%Y') unless @pq.tabled_date.nil? %></span>
  	</div>

    <div class="checkbox">
      <%= f.label(:seen_by_finance) %>
      <%= f.check_box(:seen_by_finance) %>
    </div>
    <div class="checkbox">
      <%= f.label(:finance_interest) %>
      <%= f.check_box(:finance_interest) %>
    </div>

  </div>
  <div class = "panel-indent" style="float: left; width= 66%;">
    <%= @pq.question %>
  </div>

  <div style = "float: left; width= 33%;">
	<% if @pq.seen_by_finance %>
        <div>
          <span class = "label label-success"><span class="glyphicon glyphicon-eye-open"></span> Seen By Finance</span>
        </div>
	<%else%>
        <div>
            <span class = "label label-default" style="line-height:2;"><span class="glyphicon glyphicon-eye-close"></span> Not Seen By Finance</span>
        </div>
	<% end %>
	<% if @pq.finance_interest %>
        <div>
            <span class = "label label-success">Finance Interest</span>
        </div>
	<% end %>
  </div>

</div>

<% if @pq.registered_interest %>
 <div>
  <span>Member has registered an interest in the Question.</span>
 </div>
<% end %>

      <div class="minister-info">
        <label>Set replying minister</label>
        <%= f.collection_select(:minister_id, @minister_list, :id, :name, :include_blank => "Please select") %>
      </div>
      <div class="minister-info">
        <label>Set optional policy minister</label>
        <%= f.collection_select(:policy_minister_id, @minister_list, :id, :name, :include_blank => "Only select if needed") %>
      </div>

<div class="questions-detail-outer" style="overflow:auto;">

	<label>Submit Draft Answer</label>

    <div class="trim_dates">
      <div style="float:left; margin:5px;"><label for="draft_answer_received">Draft Answer Received</label>
      </div> 
	   <div class="input-group date datetimepicker right" id="datetimepicker2" data-date-format="DD/MM/YYYY HH:mm">
		<input class="form-control" id="draft_answer_received" name="pq[draft_answer_received]" type="text" value="<%= @pq.draft_answer_received.strftime('%d/%m/%Y %H:%M') unless @pq.draft_answer_received.nil? %>">
        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
        </span>
      </div>
    </div>

    <div class="trim_dates">
      <div style="float:left; margin:5px;"><label for="i_will_write_estimate">I will write estimate</label>
	  </div>
       <div class="input-group date datetimepicker right" id="datetimepicker3" data-date-format="DD/MM/YYYY HH:mm">
		<input class="form-control" id="i_will_write_estimate" name="pq[i_will_write_estimate]" type="text" value="<%= @pq.i_will_write_estimate.strftime('%d/%m/%Y %H:%M') unless @pq.i_will_write_estimate.nil? %>">
        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
        </span>
      </div>
    </div>
	
    <div class="trim_dates">
      <div style="float:left; margin:5px;">
		  <label for="holding_reply">Holding Reply</label>
       </div>
	    <div class="input-group date datetimepicker right" id="datetimepicker4" data-date-format="DD/MM/YYYY HH:mm">
		<input class="form-control" id="holding_reply" name="pq[holding_reply]" type="text" value="<%= @pq.holding_reply.strftime('%d/%m/%Y %H:%M') unless @pq.holding_reply.nil? %>">
        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
        </span>
      </div>
    </div>



</div>
<p>
<%= f.submit 'Update', :class => 'button' %>
</p>

<% end %>


<%= render partial: 'answering/answer', locals: {pq: @pq} %>
<%= render partial: 'answering/answer_link', locals: {pq_id: @pq.id} %>
